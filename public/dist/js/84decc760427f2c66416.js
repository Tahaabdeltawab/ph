"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[787],{7787:(e,t,r)=>{r.r(t),r.d(t,{default:()=>c});var a=r(7757),n=r.n(a);function i(e,t,r,a,n,i,s){try{var o=e[i](s),c=o.value}catch(e){return void r(e)}o.done?t(c):Promise.resolve(c).then(a,n)}function s(e){return function(){var t=this,r=arguments;return new Promise((function(a,n){var s=e.apply(t,r);function o(e){i(s,a,n,o,c,"next",e)}function c(e){i(s,a,n,o,c,"throw",e)}o(void 0)}))}}const o={scrollToTop:!1,data:function(){return{cityState:null,areaState:null,showDismissibleAlert:!1}},metaInfo:function(){return{title:this.$t("settings")}},computed:(0,r(629).Se)({cities:"location/cities",areas:"location/areas",user:"auth/user",locale:"lang/locale"}),created:function(){return s(n().mark((function e(){return n().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{fetchCityAreas:function(){var e=this;return s(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("location/fetchCityAreas",{city_id:e.user.city_id});case 2:case"end":return t.stop()}}),t)})))()},updateUserLocation:function(){var e=this;return s(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.$store.dispatch("auth/updateUserLocation",{city_id:e.user.city_id,area_id:e.user.area_id});case 2:case"end":return t.stop()}}),t)})))()},checkFormValidity:function(){var e=this.$refs.locationFormRef.checkValidity();return console.log("valid"),console.log(e),this.cityState=e,this.areaState=e,e},handleSubmit:function(){var e=this;return s(n().mark((function t(){return n().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.checkFormValidity()){t.next=2;break}return t.abrupt("return");case 2:return t.next=4,e.updateUserLocation();case 4:e.$nextTick((function(){e.showDismissibleAlert=!0}));case 5:case"end":return t.stop()}}),t)})))()}}};const c=(0,r(1900).Z)(o,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("card",{attrs:{title:e.$t("location")}},[r("form",{ref:"locationFormRef",on:{submit:function(t){return t.stopPropagation(),t.preventDefault(),e.handleSubmit.apply(null,arguments)}}},[r("b-alert",{attrs:{variant:"success",dismissible:""},model:{value:e.showDismissibleAlert,callback:function(t){e.showDismissibleAlert=t},expression:"showDismissibleAlert"}},[e._v(e._s(e.$t("Updated successfully")))]),e._v(" "),r("b-form-group",{attrs:{label:e.$t("Governorate"),"label-for":"city_id","invalid-feedback":e.$t("Governorate is required"),state:e.cityState}},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.user.city_id,expression:"user.city_id"}],staticClass:"form-control",attrs:{name:"city_id",required:""},on:{change:[function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.user,"city_id",t.target.multiple?r:r[0])},e.fetchCityAreas]}},e._l(e.cities,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v("\n          "+e._s("ar"==e.locale?t.name_ar:t.name_en)+"\n        ")])})),0)]),e._v(" "),r("b-form-group",{attrs:{label:e.$t("City"),"label-for":"area_id","invalid-feedback":e.$t("City is required"),state:e.areaState}},[r("select",{directives:[{name:"model",rawName:"v-model",value:e.user.area_id,expression:"user.area_id"}],staticClass:"form-control",attrs:{name:"area_id",required:""},on:{change:function(t){var r=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){return"_value"in e?e._value:e.value}));e.$set(e.user,"area_id",t.target.multiple?r:r[0])}}},e._l(e.areas,(function(t){return r("option",{key:t.id,domProps:{value:t.id}},[e._v("\n          "+e._s("ar"==e.locale?t.name_ar:t.name_en)+"\n        ")])})),0)]),e._v(" "),r("div",{staticClass:"mb-3 row"},[r("div",{staticClass:"col-md-9 ms-md-auto"},[r("v-button",{attrs:{type:"success"}},[e._v("\n          "+e._s(e.$t("update"))+"\n        ")])],1)])],1)])}),[],!1,null,null,null).exports}}]);