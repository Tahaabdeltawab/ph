"use strict";(self["webpackChunkstudent"]=self["webpackChunkstudent"]||[]).push([[6091],{6091:(e,t,i)=>{i.r(t),i.d(t,{default:()=>Q});var l=i(3673),s=i(2323),a=i(8880);const r=(0,l._)("div",{class:"text-center q-pt-lg"},[(0,l._)("div",{class:"col text-h6 ellipsis"},"Register")],-1),n=(0,l.Uk)(" No results "),o=(0,l.Uk)(" No results "),u=(0,l.Uk)(" No results ");function d(e,t,i,d,f,m){const c=(0,l.up)("q-card-section"),p=(0,l.up)("q-input"),y=(0,l.up)("q-item-section"),h=(0,l.up)("q-item"),w=(0,l.up)("q-select"),v=(0,l.up)("q-btn"),b=(0,l.up)("q-form"),F=(0,l.up)("q-card"),_=(0,l.up)("q-page"),g=(0,l.up)("q-page-container"),V=(0,l.up)("q-layout");return(0,l.wg)(),(0,l.j4)(V,null,{default:(0,l.w5)((()=>[(0,l.Wm)(g,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"flex bg-image flex-center"},{default:(0,l.w5)((()=>[(0,l.Wm)(F,{style:(0,s.j5)(e.$q.screen.lt.sm?{width:"80%"}:{width:"30%"})},{default:(0,l.w5)((()=>[(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[r])),_:1}),(0,l.Wm)(c,null,{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(p,{modelValue:f.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>f.form.username=e),label:"Name *",autofocus:""},null,8,["modelValue"]),(0,l.Wm)(p,{type:"email",modelValue:f.form.email,"onUpdate:modelValue":t[1]||(t[1]=e=>f.form.email=e),label:"Email *"},null,8,["modelValue"]),(0,l.Wm)(p,{type:"tel",pattern:"01[0125][0-9]{8}",modelValue:f.form.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>f.form.phone=e),label:"Phone *"},null,8,["modelValue"]),(0,l.Wm)(p,{type:"password",modelValue:f.form.password,"onUpdate:modelValue":t[3]||(t[3]=e=>f.form.password=e),label:"Password *"},null,8,["modelValue"]),(0,l.Wm)(w,{disable:!(e.universitiesOptions.length>0),label:"University",modelValue:f.form.university,"onUpdate:modelValue":t[4]||(t[4]=e=>f.form.university=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:f.filteredUniversities,onFilter:m.filterFnUniversities},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:"text-grey"},{default:(0,l.w5)((()=>[n])),_:1})])),_:1})])),_:1},8,["disable","modelValue","options","onFilter"]),(0,l.Wm)(w,{disable:!f.form.university.value||!f.facultiesOptions.length,label:"Faculty",modelValue:f.form.faculty,"onUpdate:modelValue":t[5]||(t[5]=e=>f.form.faculty=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:f.filteredFaculties,onFilter:m.filterFnFaculties},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:"text-grey"},{default:(0,l.w5)((()=>[o])),_:1})])),_:1})])),_:1},8,["disable","modelValue","options","onFilter"]),(0,l.Wm)(w,{disable:!f.form.faculty.value||!f.yearsOptions.length,label:"Year",modelValue:f.form.year,"onUpdate:modelValue":t[6]||(t[6]=e=>f.form.year=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:f.filteredYears,onFilter:m.filterFnYears},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(y,{class:"text-grey"},{default:(0,l.w5)((()=>[u])),_:1})])),_:1})])),_:1},8,["disable","modelValue","options","onFilter"]),(0,l.Wm)(v,{type:"submit",color:"primary",label:"Register",onClick:(0,a.iM)(m.register,["prevent"])},null,8,["onClick"])])),_:1})])),_:1})])),_:1},8,["style"])])),_:1})])),_:1})])),_:1})}var f=i(52),m=i.n(f),c=i(3617);i(4434);const p={middleware:["guest"],methods:{async register(){await this.$store.dispatch(`${this.model}/register`,{new:this.form})},async fetchUniversities(){await this.$store.dispatch("universities/universities")},async fetchUniversityFaculties({university_id:e}){this.form.faculty="",this.form.year="",this.filteredFaculties=[],this.filteredYears=[];const{data:t}=await m().get("admin/faculties",{params:{university_id:e}});let i=t.data;i=i.map((function(e){return{label:e.title,value:e.id}})),this.facultiesOptions=i},async fetchFacultyYears({faculty_id:e}){this.form.year="",this.filteredYears=[];const{data:t}=await m().get("admin/years",{params:{faculty_id:e}});let i=t.data;i=i.map((function(e){return{label:e.title,value:e.id}})),this.yearsOptions=i},filterFnUniversities(e,t,i){t((()=>{this.filteredUniversities=this.universitiesOptions.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}))},filterFnFaculties(e,t,i){t((()=>{this.filteredFaculties=this.facultiesOptions.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}))},filterFnYears(e,t,i){t((()=>{this.filteredYears=this.yearsOptions.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}))}},async created(){await this.fetchUniversities()},data(){return{model:"users",facultiesOptions:[],yearsOptions:[],filteredFaculties:[],filteredUniversities:[],filteredYears:[],form:{username:"",email:"",phone:"",password:"",university:"",faculty:"",year:""}}},computed:{...(0,c.Se)({universitiesOptions:"universities/universitiesOptions"})},watch:{"form.university":function(e,t){e&&e.value&&this.fetchUniversityFaculties({university_id:e.value})},"form.faculty":function(e,t){e&&e.value?this.fetchFacultyYears({faculty_id:e.value}):this.filteredYears=[]}}};var y=i(4260),h=i(9214),w=i(2652),v=i(4379),b=i(151),F=i(5589),_=i(5269),g=i(4842),V=i(3314),U=i(3414),W=i(2035),O=i(8240),q=i(7518),C=i.n(q);const Z=(0,y.Z)(p,[["render",d]]),Q=Z;C()(p,"components",{QLayout:h.Z,QPageContainer:w.Z,QPage:v.Z,QCard:b.Z,QCardSection:F.Z,QForm:_.Z,QInput:g.Z,QSelect:V.Z,QItem:U.Z,QItemSection:W.Z,QBtn:O.Z})}}]);