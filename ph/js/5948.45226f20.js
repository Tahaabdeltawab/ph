"use strict";(self["webpackChunkstudent"]=self["webpackChunkstudent"]||[]).push([[5948],{3955:(t,e,o)=>{o.r(e),o.d(e,{default:()=>Z});var i=o(3673);const a=(0,i.Uk)(" No results "),l=(0,i.Uk)(" No results ");function s(t,e,o,s,r,p){const c=(0,i.up)("q-input"),d=(0,i.up)("q-item-section"),n=(0,i.up)("q-item"),u=(0,i.up)("q-select"),m=(0,i.up)("q-form"),h=(0,i.up)("q-separator"),f=(0,i.up)("q-btn"),w=(0,i.up)("q-card-actions"),b=(0,i.up)("q-card"),C=(0,i.up)("q-dialog"),_=(0,i.Q2)("close-popup");return(0,i.wg)(),(0,i.j4)(C,{ref:"EditDialogRef",modelValue:o.show,"onUpdate:modelValue":e[5]||(e[5]=t=>o.show=t),onHide:p.dialogHid},{default:(0,i.w5)((()=>[(0,i.Wm)(b,{class:"my-card q-pa-lg"},{default:(0,i.w5)((()=>[(0,i.Wm)(m,{onReset:p.onReset,class:"q-gutter-md"},{default:(0,i.w5)((()=>[(0,i.Wm)(c,{modelValue:r.form.title,"onUpdate:modelValue":e[0]||(e[0]=t=>r.form.title=t),label:"Definition *",autofocus:""},null,8,["modelValue"]),(0,i.Wm)(c,{modelValue:r.form.term,"onUpdate:modelValue":e[1]||(e[1]=t=>r.form.term=t),label:"Term *"},null,8,["modelValue"]),(0,i.Wm)(u,{label:"Topic",modelValue:r.form.topic,"onUpdate:modelValue":e[2]||(e[2]=t=>r.form.topic=t),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:r.filteredTopics,onFilter:p.filterFnTopics},{"no-option":(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"text-grey"},{default:(0,i.w5)((()=>[a])),_:1})])),_:1})])),_:1},8,["modelValue","options","onFilter"]),(0,i.Wm)(u,{disable:!r.form.topic.value,label:"Chapter",modelValue:r.form.chapter,"onUpdate:modelValue":e[3]||(e[3]=t=>r.form.chapter=t),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:r.filteredChapters,onFilter:p.filterFnChapters},{"no-option":(0,i.w5)((()=>[(0,i.Wm)(n,null,{default:(0,i.w5)((()=>[(0,i.Wm)(d,{class:"text-grey"},{default:(0,i.w5)((()=>[l])),_:1})])),_:1})])),_:1},8,["disable","modelValue","options","onFilter"])])),_:1},8,["onReset"]),(0,i.Wm)(h),(0,i.Wm)(w,{align:"right"},{default:(0,i.w5)((()=>[(0,i.Wm)(f,{type:"submit",color:"primary",label:"Submit",onClick:e[4]||(e[4]=t=>"create"==o.formAction?p.create():p.update())}),(0,i.wy)((0,i.Wm)(f,{flat:"",color:"primary",label:"Cancel"},null,512),[[_]])])),_:1})])),_:1})])),_:1},8,["modelValue","onHide"])}var r=o(52),p=o.n(r),c=o(3617);o(4434);const d={props:["show","datum","formAction","model"],methods:{dialogHid(){this.$store.commit("config/dialogShow",{dialogShow:!1})},async create(){await this.$store.dispatch(`${this.model}/create`,{new:this.form})},async update(){await this.$store.dispatch(`${this.model}/update`,{id:this.datum.id,new:this.form})},async fetchTopics(){await this.$store.dispatch("topics/topics")},async fetchTopicChapters({topic_id:t}){this.form.chapter="";const{data:e}=await p().get("admin/chapters",{params:{topic_id:t}});let o=e.data;o=o.map((function(t){return{label:t.title,value:t.id}})),this.chaptersOptions=o,this.datum.topic_id==this.form.topic.value&&(this.form["chapter"]={label:this.datum["chapter"],value:this.datum["chapter_id"]})},onReset(){Object.keys(this.form).forEach((t=>{this.form[t]=""}))},fillForm(){Object.keys(this.form).forEach((t=>{this.form[t]=this.datum[t]})),this.form["topic"]={label:this.datum["topic"],value:this.datum["topic_id"]}},filterFnTopics(t,e,o){e((()=>{this.filteredTopics=this.topicsOptions.filter((e=>e.label.toLowerCase().indexOf(t.toLowerCase())>-1))}))},filterFnChapters(t,e,o){e((()=>{this.filteredChapters=this.chaptersOptions.filter((e=>e.label.toLowerCase().indexOf(t.toLowerCase())>-1))}))}},async created(){await this.fetchTopics()},updated(){this.show&&this.fillForm()},data(){return{chaptersOptions:[],filteredChapters:[],filteredTopics:[],form:{title:"",term:"",chapter:"",topic:""}}},computed:{...(0,c.Se)({topicsOptions:"topics/topicsOptions"})},watch:{"form.topic":function(t,e){t&&t.value&&(this.fetchTopicChapters({topic_id:t.value}),this.form["chapter"]={label:this.datum["chapter"],value:this.datum["chapter_id"]})}}};var n=o(4260),u=o(6778),m=o(151),h=o(5269),f=o(4842),w=o(3314),b=o(3414),C=o(2035),_=o(5869),g=o(9367),V=o(8240),y=o(677),W=o(7518),v=o.n(W);const q=(0,n.Z)(d,[["render",s],["__scopeId","data-v-2bd56520"]]),Z=q;v()(d,"components",{QDialog:u.Z,QCard:m.Z,QForm:h.Z,QInput:f.Z,QSelect:w.Z,QItem:b.Z,QItemSection:C.Z,QSeparator:_.Z,QCardActions:g.Z,QBtn:V.Z}),v()(d,"directives",{ClosePopup:y.Z})}}]);