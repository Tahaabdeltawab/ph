"use strict";(self["webpackChunkstudent"]=self["webpackChunkstudent"]||[]).push([[7904],{7904:(e,t,i)=>{i.r(t),i.d(t,{default:()=>C});var l=i(3673);const a=(0,l.Uk)(" No results "),s=(0,l.Uk)(" No results "),o=(0,l.Uk)(" No results ");function r(e,t,i,r,u,n){const d=(0,l.up)("q-input"),m=(0,l.up)("q-item-section"),f=(0,l.up)("q-item"),c=(0,l.up)("q-select"),p=(0,l.up)("q-toggle"),h=(0,l.up)("q-form"),y=(0,l.up)("q-separator"),v=(0,l.up)("q-btn"),w=(0,l.up)("q-card-actions"),b=(0,l.up)("q-card"),V=(0,l.up)("q-dialog"),g=(0,l.Q2)("close-popup");return(0,l.wg)(),(0,l.j4)(V,{ref:"EditDialogRef",modelValue:i.show,"onUpdate:modelValue":t[10]||(t[10]=e=>i.show=e),onHide:n.dialogHid},{default:(0,l.w5)((()=>[(0,l.Wm)(b,{class:"my-card q-pa-lg"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{onReset:n.onReset,class:"q-gutter-md"},{default:(0,l.w5)((()=>[(0,l.Wm)(d,{modelValue:u.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>u.form.username=e),label:"Name *",autofocus:""},null,8,["modelValue"]),(0,l.Wm)(d,{type:"email",modelValue:u.form.email,"onUpdate:modelValue":t[1]||(t[1]=e=>u.form.email=e),label:"Email *"},null,8,["modelValue"]),(0,l.Wm)(d,{type:"tel",pattern:"01[0125][0-9]{8}",modelValue:u.form.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>u.form.phone=e),label:"Phone *"},null,8,["modelValue"]),(0,l.Wm)(d,{type:"password",modelValue:u.form.password,"onUpdate:modelValue":t[3]||(t[3]=e=>u.form.password=e),label:"Password"+("update"==i.formAction?" (optional)":" *")},null,8,["modelValue","label"]),(0,l.Wm)(c,{disable:!(e.universitiesOptions.length>0),label:"University",modelValue:u.form.university,"onUpdate:modelValue":t[4]||(t[4]=e=>u.form.university=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:u.filteredUniversities,onFilter:n.filterFnUniversities},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"text-grey"},{default:(0,l.w5)((()=>[a])),_:1})])),_:1})])),_:1},8,["disable","modelValue","options","onFilter"]),(0,l.Wm)(c,{disable:!u.form.university.value||!u.facultiesOptions.length,label:"Faculty",modelValue:u.form.faculty,"onUpdate:modelValue":t[5]||(t[5]=e=>u.form.faculty=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:u.filteredFaculties,onFilter:n.filterFnFaculties},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"text-grey"},{default:(0,l.w5)((()=>[s])),_:1})])),_:1})])),_:1},8,["disable","modelValue","options","onFilter"]),(0,l.Wm)(c,{disable:!(u.form.faculty&&u.form.faculty.value&&u.yearsOptions.length),label:"Year",modelValue:u.form.year,"onUpdate:modelValue":t[6]||(t[6]=e=>u.form.year=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:u.filteredYears,onFilter:n.filterFnYears},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(f,null,{default:(0,l.w5)((()=>[(0,l.Wm)(m,{class:"text-grey"},{default:(0,l.w5)((()=>[o])),_:1})])),_:1})])),_:1},8,["disable","modelValue","options","onFilter"]),(0,l.Wm)(c,{modelValue:u.form.role,"onUpdate:modelValue":t[7]||(t[7]=e=>u.form.role=e),options:u.roleOptions,label:"Role"},null,8,["modelValue","options"]),(0,l.Wm)(p,{"true-value":1,"false-value":0,color:"green",modelValue:u.form.status,"onUpdate:modelValue":t[8]||(t[8]=e=>u.form.status=e),label:"Status"},null,8,["modelValue"])])),_:1},8,["onReset"]),(0,l.Wm)(y),(0,l.Wm)(w,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(v,{type:"submit",color:"primary",label:"Submit",onClick:t[9]||(t[9]=e=>"create"==i.formAction?n.create():n.update())}),(0,l.wy)((0,l.Wm)(v,{flat:"",color:"primary",label:"Cancel"},null,512),[[g]])])),_:1})])),_:1})])),_:1},8,["modelValue","onHide"])}var u=i(52),n=i.n(u),d=i(3617);i(4434);const m={props:["show","datum","formAction","model"],methods:{dialogHid(){this.$store.commit("config/dialogShow",{dialogShow:!1})},async create(){await this.$store.dispatch(`${this.model}/create`,{new:this.form})},async update(){await this.$store.dispatch(`${this.model}/update`,{id:this.datum.id,new:this.form})},onReset(){Object.keys(this.form).forEach((e=>{this.form[e]="","users"==this.model&&("role"==e&&(this.form[e]="user"),"status"==e&&(this.form[e]=!0))}))},fillForm(){Object.keys(this.form).forEach((e=>{this.form[e]=this.datum[e]})),this.form["university"]={label:this.datum["university"],value:this.datum["university_id"]}},async fetchUniversities(){await this.$store.dispatch("universities/universities")},async fetchUniversityFaculties({university_id:e}){this.form.faculty="",this.form.year="",this.filteredFaculties=[],this.filteredYears=[];const{data:t}=await n().get("admin/faculties",{params:{university_id:e}});let i=t.data;i=i.map((function(e){return{label:e.title,value:e.id}})),this.facultiesOptions=i},async fetchFacultyYears({faculty_id:e}){this.form.year="",this.filteredYears=[];const{data:t}=await n().get("admin/years",{params:{faculty_id:e}});let i=t.data;i=i.map((function(e){return{label:e.title,value:e.id}})),this.yearsOptions=i},filterFnUniversities(e,t,i){t((()=>{this.filteredUniversities=this.universitiesOptions.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}))},filterFnFaculties(e,t,i){t((()=>{this.filteredFaculties=this.facultiesOptions.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}))},filterFnYears(e,t,i){t((()=>{this.filteredYears=this.yearsOptions.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}))}},async created(){await this.fetchUniversities()},updated(){this.show&&this.fillForm()},data(){return{facultiesOptions:[],yearsOptions:[],filteredFaculties:[],filteredUniversities:[],filteredYears:[],roleOptions:["admin","user"],form:{username:"",email:"",phone:"",password:"",university:"",faculty:"",year:"",role:"user",status:!0}}},computed:{...(0,d.Se)({universitiesOptions:"universities/universitiesOptions"})},watch:{"form.university":function(e,t){e&&e.value&&(this.fetchUniversityFaculties({university_id:e.value}),this.form["faculty"]={label:this.datum["faculty"],value:this.datum["faculty_id"]})},"form.faculty":function(e,t){e&&e.value&&(this.fetchFacultyYears({faculty_id:e.value}),this.form["year"]={label:this.datum["year"],value:this.datum["year_id"]})}}};var f=i(4260),c=i(6778),p=i(151),h=i(5269),y=i(4842),v=i(3314),w=i(3414),b=i(2035),V=i(8886),g=i(5869),F=i(9367),_=i(8240),U=i(677),W=i(7518),O=i.n(W);const q=(0,f.Z)(m,[["render",r],["__scopeId","data-v-36810854"]]),C=q;O()(m,"components",{QDialog:c.Z,QCard:p.Z,QForm:h.Z,QInput:y.Z,QSelect:v.Z,QItem:w.Z,QItemSection:b.Z,QToggle:V.Z,QSeparator:g.Z,QCardActions:F.Z,QBtn:_.Z}),O()(m,"directives",{ClosePopup:U.Z})}}]);