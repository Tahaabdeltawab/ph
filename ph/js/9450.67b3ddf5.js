"use strict";(self["webpackChunkstudent"]=self["webpackChunkstudent"]||[]).push([[9450],{9450:(e,t,s)=>{s.r(t),s.d(t,{default:()=>Z});var l=s(3673),a=s(8880);const i={class:"row q-col-gutter-sm"},r={class:"col-lg-12 col-md-12 col-xs-12 col-sm-12"},o=(0,l._)("div",{class:"text-h6"},"Update Profile",-1),u=(0,l.Uk)("No results"),n=(0,l.Uk)("No results"),d=(0,l.Uk)("No results"),m={class:"col-lg-12 col-md-12 col-xs-12 col-sm-12"},f=(0,l._)("div",{class:"text-h6"},"Update Password",-1);function c(e,t,s,c,p,w){const h=(0,l.up)("q-card-section"),y=(0,l.up)("q-input"),_=(0,l.up)("q-item-section"),v=(0,l.up)("q-item"),b=(0,l.up)("q-select"),V=(0,l.up)("q-btn"),F=(0,l.up)("q-card-actions"),W=(0,l.up)("q-form"),U=(0,l.up)("q-card"),g=(0,l.up)("q-page");return(0,l.wg)(),(0,l.j4)(g,{class:"q-pa-sm bg-grey-10"},{default:(0,l.w5)((()=>[(0,l._)("div",i,[(0,l._)("div",r,[(0,l.Wm)(U,{class:"card-bg"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"text-h6 q-pa-sm"},{default:(0,l.w5)((()=>[o])),_:1}),(0,l.Wm)(h,null,{default:(0,l.w5)((()=>[(0,l.Wm)(W,{class:"q-gutter-md",autocomplete:"false"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{modelValue:p.form.username,"onUpdate:modelValue":t[0]||(t[0]=e=>p.form.username=e),label:"Name *",autofocus:""},null,8,["modelValue"]),(0,l.Wm)(y,{type:"email",modelValue:p.form.email,"onUpdate:modelValue":t[1]||(t[1]=e=>p.form.email=e),label:"Email *"},null,8,["modelValue"]),(0,l.Wm)(y,{type:"tel",pattern:"01[0125][0-9]{8}",modelValue:p.form.phone,"onUpdate:modelValue":t[2]||(t[2]=e=>p.form.phone=e),label:"Phone *"},null,8,["modelValue"]),(0,l.Wm)(b,{disable:!(e.universitiesOptions.length>0),label:"University",modelValue:p.form.university,"onUpdate:modelValue":t[3]||(t[3]=e=>p.form.university=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:p.filteredUniversities,onFilter:w.filterFnUniversities},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"text-grey"},{default:(0,l.w5)((()=>[u])),_:1})])),_:1})])),_:1},8,["disable","modelValue","options","onFilter"]),(0,l.Wm)(b,{disable:!p.form.university.value||!p.facultiesOptions.length,label:"Faculty",modelValue:p.form.faculty,"onUpdate:modelValue":t[4]||(t[4]=e=>p.form.faculty=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:p.filteredFaculties,onFilter:w.filterFnFaculties},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"text-grey"},{default:(0,l.w5)((()=>[n])),_:1})])),_:1})])),_:1},8,["disable","modelValue","options","onFilter"]),(0,l.Wm)(b,{disable:!p.form.faculty.value||!p.yearsOptions.length,label:"Year",modelValue:p.form.year,"onUpdate:modelValue":t[5]||(t[5]=e=>p.form.year=e),"use-input":"","hide-selected":"","fill-input":"","input-debounce":"0",options:p.filteredYears,onFilter:w.filterFnYears},{"no-option":(0,l.w5)((()=>[(0,l.Wm)(v,null,{default:(0,l.w5)((()=>[(0,l.Wm)(_,{class:"text-grey"},{default:(0,l.w5)((()=>[d])),_:1})])),_:1})])),_:1},8,["disable","modelValue","options","onFilter"]),(0,l.Wm)(F,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{type:"submit",color:"primary",label:"Update",onClick:(0,a.iM)(w.updateProfile,["prevent"])},null,8,["onClick"])])),_:1})])),_:1})])),_:1})])),_:1})]),(0,l._)("div",m,[(0,l.Wm)(U,{class:"card-bg"},{default:(0,l.w5)((()=>[(0,l.Wm)(h,{class:"text-h6 q-pa-sm"},{default:(0,l.w5)((()=>[f])),_:1}),(0,l.Wm)(h,{class:"q-pa-sm"},{default:(0,l.w5)((()=>[(0,l.Wm)(y,{type:"password",modelValue:p.password_form.old_password,"onUpdate:modelValue":t[6]||(t[6]=e=>p.password_form.old_password=e),label:"Current Password"},null,8,["modelValue"]),(0,l.Wm)(y,{type:"password",modelValue:p.password_form.new_password,"onUpdate:modelValue":t[7]||(t[7]=e=>p.password_form.new_password=e),label:"New Password"},null,8,["modelValue"]),(0,l.Wm)(y,{type:"password",modelValue:p.password_form.new_password_confirmation,"onUpdate:modelValue":t[8]||(t[8]=e=>p.password_form.new_password_confirmation=e),label:"Confirm New Password"},null,8,["modelValue"])])),_:1}),(0,l.Wm)(F,{align:"right"},{default:(0,l.w5)((()=>[(0,l.Wm)(V,{type:"submit",color:"primary",label:"Change Password",onClick:(0,a.iM)(w.updatePassword,["prevent"])},null,8,["onClick"])])),_:1})])),_:1})])])])),_:1})}var p=s(52),w=s.n(p),h=s(3617);s(4434);const y={middleware:["auth"],methods:{async updateProfile(){await this.$store.dispatch(`${this.model}/updateProfile`,{new:this.form})},async updatePassword(){await this.$store.dispatch(`${this.model}/updatePassword`,{new:this.password_form})},async fetchUniversities(){await this.$store.dispatch("universities/universities"),this.form["university"]={label:this.user["university"],value:this.user["university_id"]}},async fetchUniversityFaculties({university_id:e}){this.form.faculty="",this.form.year="",this.filteredFaculties=[],this.filteredYears=[];const{data:t}=await w().get("admin/faculties",{params:{university_id:e}});let s=t.data;s=s.map((function(e){return{label:e.title,value:e.id}})),this.facultiesOptions=s},async fetchFacultyYears({faculty_id:e}){this.form.year="",this.filteredYears=[];const{data:t}=await w().get("admin/years",{params:{faculty_id:e}});let s=t.data;s=s.map((function(e){return{label:e.title,value:e.id}})),this.yearsOptions=s},filterFnUniversities(e,t,s){t((()=>{this.filteredUniversities=this.universitiesOptions.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}))},filterFnFaculties(e,t,s){t((()=>{this.filteredFaculties=this.facultiesOptions.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}))},filterFnYears(e,t,s){t((()=>{this.filteredYears=this.yearsOptions.filter((t=>t.label.toLowerCase().indexOf(e.toLowerCase())>-1))}))},fillForm(){Object.keys(this.form).forEach((e=>{this.form[e]=this.user[e]}))}},async created(){this.fillForm(),await this.fetchUniversities()},data(){return{model:"users",facultiesOptions:[],yearsOptions:[],filteredFaculties:[],filteredUniversities:[],filteredYears:[],form:{username:"",email:"",phone:"",university:"",faculty:"",year:""},password_form:{old_password:"",new_password:"",new_password_confirmation:""}}},computed:{...(0,h.Se)({universitiesOptions:"universities/universitiesOptions",user:"users/user"})},watch:{"form.university":function(e,t){e&&e.value&&(this.fetchUniversityFaculties({university_id:e.value}),this.user.university_id==this.form.university.value&&(this.form["faculty"]={label:this.user["faculty"],value:this.user["faculty_id"]}))},"form.faculty":function(e,t){e&&e.value&&(this.fetchFacultyYears({faculty_id:e.value}),this.user.faculty_id==this.form.faculty.value&&(this.form["year"]={label:this.user["year"],value:this.user["year_id"]}))}}};var _=s(4260),v=s(4379),b=s(151),V=s(5589),F=s(5269),W=s(4842),U=s(3314),g=s(3414),C=s(2035),q=s(9367),O=s(8240),P=s(7518),k=s.n(P);const x=(0,_.Z)(y,[["render",c]]),Z=x;k()(y,"components",{QPage:v.Z,QCard:b.Z,QCardSection:V.Z,QForm:F.Z,QInput:W.Z,QSelect:U.Z,QItem:g.Z,QItemSection:C.Z,QCardActions:q.Z,QBtn:O.Z})}}]);